<div class="sdk-search">

    <div class="row-fluid" ng-repeat="row in config">

        <div class="span12">
            <div class="row-fluid redform-form sdk-search__config">
                <div class="span4">
                    <div class="field">
                        <label>
                            Felt
                            <select
                                ng-model="row.field"
                                ng-change="clearRow(row)"
                                ng-options="field.name for field in fields | filter: {'searchable': 1}">
                            </select>
                        </label>
                    </div>
                </div>
                <div class="span4">
                    <div class="field">
                        <label>
                            Operator
                            <select
                                ng-options="operator.solr_query as operator.label for operator in row.field.operators"
                                ng-model="row.operator"
                                ng-init="clearRow(row)"
                                <option>Vælg</option>
                            </select>
                        </label>
                    </div>
                </div>
                <div class="span4">
                    <div class="field">
                        <term-field-date ng-if="row.field.formFieldType === 'date'" type="row.field.formFieldType" data="row" submit-func="submitSearch(event)"></term-field-date>
                        <term-field ng-if="row.field.formFieldType !== 'date'" type="row.field.formFieldType" data="row" submit-func="submitSearch(event)"></term-field>
                    </div>
                </div>
                <a href class="sdk-search__remove" title="Fjern række" ng-click="removeField($index, $event)" ng-if="config.length > 1">
                    <span class="sdk-icon delete"></span>
                </a>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <a href class="sdk-search__add" ng-click="addField('firstnames')">Tilføj et felt</a>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <button type="button" class="button" ng-click="doSearch()" ng-disabled="searching">Søg</button>

             <hr class="sdk-search__divider">
        </div>

    </div>

    <section class="row-fluid" ng-if="results.docs.length == 0">
        <div class="span12">
            <p>Der er ikke fundet nogen resultater</p>
        </div>
    </section>

    <section class="row-fluid sdk-search__results" ng-class="{'loading': searching}" ng-if="results.docs.length > 0">
        <div class="span4">
            <div class="sdk-search__count">
                <post-count current-index="currentIndex" total="results.numFound" posts-pr-page="10"></post-count>
            </div>
        </div>

        <div class="span8 sorting">
            <div class="row">
                <div class="span6 text-right">
                    <label class="sorting__label">Sortér efter</label>
                </div>

                <div class="span6">

                    <div class="sorting__container">
                        <select
                            class="sorting__selection"
                            ng-model="sortByField.name"
                            ng-options="field.solr_name as field.name for field in fields | filter: {'searchable': 1, 'sortable' : 1}">
                        </select>
                        <a href ng-click="toggleSortDirection()" class="sorting__direction" title="{{sortDirection}}" ng-class="sortDirection"></a>
                    </div>
                </div>
            </div>

        </div>

        <div class="row-fluid">
            <div class="span12">
                <div class="search-container">

                    <div class="search-container__row">
                        <div class="search-container__header">
                            Navn
                        </div>
                        <div class="search-container__header">
                            Adresse
                        </div>
                        <div class="search-container__header">
                            Andre oplysninger
                        </div>
                        <div class="search-container__header">
                            Om kilden
                        </div>
                    </div>

                    <search-result ng-repeat="result in results.docs" result="result" config="fields" index="$index" page="currentPage"></search-result>

                </div>
            </div>
        </div>

    </section>

    <div class="row-fluid" ng-if="results.numFound > 10">
        <div class="span12">
            <pagination current-index="currentIndex" pagination="pagination" go-to-page="goToPage"></pagination>
        </div>
    </div>

</div>
