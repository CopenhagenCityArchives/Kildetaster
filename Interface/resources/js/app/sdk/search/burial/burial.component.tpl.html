<section class="post">

    <div class="post__head">
        <div class="post__item post__main post__alternate">

            <div class="post__tools">
                <a href="" ng-click="$ctrl.openErrorReporting()">Rapporter fejl</a>
            </div>

            <div class="post__header">
                <h2>
                    {{ $ctrl.data.firstnames }} {{ $ctrl.data.lastname }} <span ng-if="$ctrl.data.birthname">{{$ctrl.data.birthname}}</span></span>
                    <span class="post__collection">Begravelse</span>
                </h2>

                <p ng-if="$ctrl.data.dateOfBirth">Født: {{ $ctrl.data.dateOfBirth | date: 'dd-MM-yyyy' }} <span ng-if="$ctrl.data.birthplace"> i {{$ctrl.data.birthplace}}</span></p>
                <p ng-if="isNumber($ctrl.data.yearOfBirth)">Fødselsår: {{$ctrl.data.yearOfBirth}}</p>
                <text-date prefix="Død" date="$ctrl.data.dateOfDeath"></text-date>
                <p><text-age prefix="'Alder: '" years="$ctrl.data.ageYears" months="$ctrl.data.ageMonths" weeks="$ctrl.data.ageWeeks" days="$ctrl.data.ageDays" hours="$ctrl.data.ageHours"></text-age></p>
                <p ><span ng-if="$ctrl.data.civilstatus">{{ $ctrl.data.civilstatus }}<span ng-if="$ctrl.data.civilstatus && $ctrl.data.sex">,</span> <span ng-if="$ctrl.data.sex">{{ $ctrl.data.sex }}</span></p>
                <div ng-repeat="position in $ctrl.data.positions">
                    <text-position position="position"></text-position>
                </div>

                <!-- Error reports -->
                <div ng-if="$ctrl.postErrors.length > 0" class="post__error">
                    <div>Denne post er fejlmeldt</div>
                    <a href ng-click="$ctrl.toggleErrorReports()">Læs mere</a>

                    <div ng-repeat="error in $ctrl.postErrors" ng-if="$ctrl.showErrorReports">
                        {{ error.label || 'Ukendt felt' }}: {{error.comment}}
                    </div>
                </div>

            </div>

        </div>
        <div class="post__item post__viewer">
            <zoom-image image-url="$ctrl.imageUrl"></zoom-image>
            <div class="post__links">
                <a ng-href="{{$ctrl.data.kildeviser_url}}" target="_blank" class="button">Vis i kildeviser</a>
                <a href ng-if="$ctrl.showEditorLink" ng-href="{{ $ctrl.editorUrl }}" target="_blank" class="button">Vis i kildetaster</a>
            </div>
        </div>
    </div>

    <div class="post__col">

        <div class="post__item">
            <h3 class="post__sectionheader">Adresse</h3>
            <text-address address="$ctrl.data.address"></text-address>
        </div>

        <div class="post__item">
            <h3 class="post__sectionheader">Om dødsfaldet/begravelsen</h3>
            <p ng-if="$ctrl.data.deathcauses">Dødsårsag:
                <div ng-repeat="deathcause in $ctrl.data.deathcauses">
                    <text-deathcause deathcause="deathcause"></text-deathcause>
                </div>
            </p>

            <p ng-if="$ctrl.data.deathplace">Dødssted: {{ $ctrl.data.deathplace }}</p>
            <!-- TODO: make directive to show burials -->
            <p ng-if="$ctrl.data.record_number">Løbenummer: {{ $ctrl.data.record_number }}</p>
            <p ng-if="$ctrl.data.chapel">Fra (kapel): {{ $ctrl.data.chapel }}</p>
            <p ng-if="$ctrl.data.parish">Sogn: {{ $ctrl.data.parish }}</p>
            <p ng-if="$ctrl.data.cemetary">Til (kirkegård): {{ $ctrl.data.cemetary }}</p>
            <p ng-if="$ctrl.data.comment">Kommentar: {{ $ctrl.data.comment }}</p>

        </div>
    </div>

    <div class="post__col post__alternate">

        <div class="post__item">
            <h3 class="post__sectionheader">Om kilden</h3>
            <p>{{ $ctrl.data.collection_info }} {{ $ctrl.data.unit_description }} s. {{ $ctrl.data.page_number }}</p>
        </div>

        <div class="post__item">
            <h3 class="post__sectionheader">Om indtastningen</h3>
            <!--<p>Indtastet: <span style="color: red">Data mangler, eller er det 'last_update'?</span> af {{ $ctrl.data.user_name }}</p>-->
            <p>Sidst opdateret {{ $ctrl.data.last_update | date: 'dd-MM-yyyy' }} af {{ $ctrl.data.user_name }}</p>
            <!--<p>Fejl, fejlentitet, kommentar: <span style="color: red">Mangler info</span></p>-->
        </div>

    </div>

</section>
